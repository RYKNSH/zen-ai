---
description: 新機能の仕様策定をインタビュー形式で行う
---
# /spec - 仕様策定インタビューワークフロー

Claude Code公式推奨の「Claudeにインタビューさせる」パターンを実装。
要件の抜け漏れを防ぎ、高品質なSPEC.mdを生成する。

## Cross-Reference

```
/work "新機能" → /spec → /debate quick (QA) → /new-feature
/vision-os の代替としても使用可能
```

---

## 使用方法

```
/spec [機能の簡潔な説明]
```

例: `/spec ユーザープロフィール編集機能`

---

## ワークフロー

### Phase 1: ディープインタビュー

> 🧠 **THINK GATE — 計画フェーズ**: `WORKFLOW_CONTRACTS.md` の Core Engagement Matrix を参照。
> Small: H | Medium: H + T(quick) + N(quick) | Large: H + T + N(deep) + I

以下の観点でユーザーにインタビューする:

1. **技術実装**
   - どの既存モジュールに影響するか？
   - 新規APIエンドポイントは必要か？
   - データベーススキーマの変更は？

2. **UI/UX**
   - どのような操作フローを想定しているか？
   - モバイル対応は必要か？
   - アクセシビリティ要件は？

3. **エッジケース**
   - 同時編集はあり得るか？
   - オフライン動作は必要か？
   - 大量データ時の挙動は？

4. **懸念事項**
   - セキュリティリスクは？
   - パフォーマンス影響は？
   - 後方互換性は？

5. **トレードオフ**
   - 最小実装 vs フル実装の境界は？
   - 優先すべき機能は？

### Phase 2: SPEC.md生成

インタビュー完了後、以下の形式でSPEC.mdを生成:

```markdown
# [機能名] 仕様書

## 概要
[1-2文で機能の目的を説明]

## 要件

### 必須 (Must Have)
- ...

### 推奨 (Should Have)
- ...

### 検討 (Could Have)
- ...

## 技術設計

### 影響範囲
- ファイル: ...
- DB: ...
- API: ...

### エッジケース対応
| ケース | 対応方針 |
|--------|----------|
| ... | ... |

## 検証計画
- [ ] ユニットテスト: ...
- [ ] 統合テスト: ...
- [ ] 手動検証: ...

## リスクと軽減策
| リスク | 軽減策 |
|--------|--------|
| ... | ... |
```

---

## 注意事項

> [!TIP]
> 明らかな質問はスキップし、難しい部分を深掘りすること。
> ユーザーが考えていなかった観点を引き出すのが目的。

> [!WARNING]
> インタビューは完全に完了するまで続ける。
> 中途半端な仕様書は後のバグの温床になる。

---

### Phase 3: Spec Review (自動)

SPEC.md 生成後、`/debate quick` を自動実行して仕様の抜け漏れを検出:

- **Skeptic**: 「この仕様で本当に問題が解決するのか？」
- **Architect**: 「スケーラビリティは考慮されているか？」

問題があれば SPEC.md を修正してから次のワークフロー（`/new-feature` 等）へ進む。
