---
name: Code Review
description: First Principles に基づく徹底的なコードレビューを実施するスキル
---

# Code Review Skill

## 概要

このスキルは、単なるスタイルチェックを超えた、First Principles に基づく深いコードレビューを提供します。
コードの「なぜ」を問い、設計の妥当性、将来の保守性、理想系との整合性を評価します。

## 発動条件

- ユーザーがコードレビューを依頼した時
- 新しいコードを書き終えた後の確認
- リファクタリング後の検証
- 技術的負債の評価

## レビュー観点

### 1. First Principles チェック

```markdown
- [ ] このコードは本当に必要か？
- [ ] より単純な解決策はないか？
- [ ] 根本的な問題を解決しているか？（バンドエイドではないか）
```

### 2. 理想系との整合性

```markdown
- [ ] このコードは理想系に近づけるか？
- [ ] 将来の変更を困難にしないか？
- [ ] 技術的負債を増やさないか？
```

### 3. コード品質

```markdown
- [ ] 単一責任の原則（SRP）に従っているか？
- [ ] 関数/メソッドは適切な長さか（〜20行推奨）？
- [ ] 命名は意図を明確に表しているか？
- [ ] マジックナンバーや文字列が埋め込まれていないか？
```

### 4. エラーハンドリング

```markdown
- [ ] エラーは適切に処理されているか？
- [ ] エラーメッセージは有用か？
- [ ] リソースのクリーンアップは行われているか？
```

### 5. テスタビリティ

```markdown
- [ ] このコードはテスト可能か？
- [ ] 依存関係は注入可能か？
- [ ] 副作用は最小限か？
```

### 6. パフォーマンス意識

```markdown
- [ ] N+1問題を起こしていないか？
- [ ] 不必要なループや再計算はないか？
- [ ] メモリリークのリスクはないか？
```

## 出力形式

```markdown
## 🔍 コードレビュー結果

### 総合評価
[✅ 承認 / ⚠️ 要修正 / ❌ 再設計が必要]

### First Principles 観点
[根本的な設計についてのコメント]

### 良い点
1. 
2. 

### 改善すべき点
1. [場所]: [問題] → [推奨する修正]
2. [場所]: [問題] → [推奨する修正]

### 質問
1. [コードの意図を確認する質問]

### 推奨アクション
- [ ] [具体的なアクション]
```

## 重要度の定義

| レベル | 説明 | 対応 |
|--------|------|------|
| 🔴 Critical | セキュリティ、データ整合性に影響 | マージ前に必ず修正 |
| 🟠 Major | 機能性、保守性に大きく影響 | 修正を強く推奨 |
| 🟡 Minor | コード品質、可読性に影響 | 可能であれば修正 |
| 🔵 Suggestion | 改善の提案 | 検討のみ |
