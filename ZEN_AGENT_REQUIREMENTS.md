# 自律型AIエージェント 設計思想 & 要件定義書
## Zen-Agent Architecture v1.0 — 2026.02.18

> docxファイル（ZEN_AGENT_REQUIREMENTS.docx）の内容と同一。Antigravity用マークダウン版。

---

## 設計思想の核心

コンテキストの記憶量が重要なのではなく、**ゴールを見失わずに現状を認識できる能力**。

### エージェントの常駐メモリ（最小限）
- GOAL（現在のマイルストーン）
- 現状スナップショット
- デルタ（ゴールと現状のずれ）

### 必要時だけ取りに行く
- **SkillDB**：具体的なまま・抽象化しない
- **FailureKnowledgeDB**：格言形式（条件付き）に抽象化・圧縮

---

## 成功と失敗の非対称な扱い

| | 扱い | 理由 |
|---|---|---|
| 成功パターン | リセットして捨てる | 文脈依存・思い込みになる |
| 失敗パターン | 格言として残す | パターンとして普遍性がある |

---

## 失敗ナレッジの形式
```json
{
  "knowledge_id": "fk_001",
  "proverb": "認証を先に済ませてから作業を始めよ",
  "condition": "外部サービス接続が必要なマイルストーン開始時",
  "severity": "HIGH"
}
```

---

## Context Reset の手順
1. マイルストーン条件（リソース取得・状態）を満たしているか確認
2. 今セッションの失敗を格言形式に変換
3. スキルをSkillDBに追加（具体的なまま）
4. 成功パターン含む全コンテキストを破棄
5. GOAL + 次のマイルストーン + 現状スナップショットを新規セッションに注入

---

## Antigravityへの指示
このドキュメントを読んだうえで、WORKFLOW_INCIDENT_REPORT.md と合わせて現在のワークフローを分析し、Zen-Agent設計に基づいた改善案を提案せよ。
